diff --git a/Makefile.am b/Makefile.am
	OK, minimal diff, add one freebsd directory
diff --git a/README-freebsd.md b/README-freebsd.md
	OK, new file, notes
diff --git a/configure.ac b/configure.ac
	OK, UPSTREAM (possibly with FreeBSD fixes)
	XXX check fast_switch and netmap conditional
diff --git a/freebsd/.gitignore b/freebsd/.gitignore
	ok
diff --git a/freebsd/Makefile.am b/freebsd/Makefile.am
	OK new file
diff --git a/freebsd/cxa_thread_atexit.cpp b/freebsd/cxa_thread_atexit.cpp
	XXX ok, possibly check license
diff --git a/include/bm/bm_sim/dev_mgr.h b/include/bm/bm_sim/dev_mgr.h
	XXX check conditional compilation
diff --git a/include/bm/bm_sim/learning.h b/include/bm/bm_sim/learning.h
	OK UPSTREAM initializer
diff --git a/include/bm/bm_sim/lockless_queueing.h b/include/bm/bm_sim/lockless_queueing.h
	XXX test code, must be merged somewhere
diff --git a/include/bm/bm_sim/options_parse.h b/include/bm/bm_sim/options_parse.h
	XXX introduce netmap option, somewhere else ?
diff --git a/include/bm/bm_sim/packet.h b/include/bm/bm_sim/packet.h
	OK UPSTREAM, export get_ingress_ts
diff --git a/include/bm/bm_sim/packet_handler.h b/include/bm/bm_sim/packet_handler.h
	XXX add parameter for batching
	XXX see also dev_mgr_bmi.cpp and bmi_port.[ch]
diff --git a/include/bm/bm_sim/port_monitor.h b/include/bm/bm_sim/port_monitor.h
	OK upstream, needed #include <functional>
diff --git a/include/bm/bm_sim/short_alloc.h b/include/bm/bm_sim/short_alloc.h
	OK UPSTREAM  check __clang__
diff --git a/include/bm/bm_sim/spsc_queue.h b/include/bm/bm_sim/spsc_queue.h
	XXX our new queue, keep here
diff --git a/include/bm/bm_sim/switch.h b/include/bm/bm_sim/switch.h
	XXX receive has an extra parameter,
	XXX upstream conditional lock ?
diff --git a/speed_tests/basic_switch.json b/speed_tests/basic_switch.json
	XXX used for tests, can be optional/removed
diff --git a/speed_tests/basic_switch.p4 b/speed_tests/basic_switch.p4
	XXX used for tests, can be optional/removed
diff --git a/speed_tests/basic_switch_commands.txt b/speed_tests/basic_switch_commands.txt
	XXX test commands
diff --git a/speed_tests/simple_router.json b/speed_tests/simple_router.json
	XXX copied for convenience, can be removed/moved into tests/
diff --git a/speed_tests/simple_router.p4 b/speed_tests/simple_router.p4
	XXX as above
diff --git a/speed_tests/simple_router_commands.txt b/speed_tests/simple_router_commands.txt
	XXX as above
diff --git a/speed_tests/speed_test.py b/speed_tests/speed_test.py
	XXX completely new, must be kept
diff --git a/src/BMI/BMI/bmi_port.h b/src/BMI/BMI/bmi_port.h
	XXX add argument to packet handler
diff --git a/src/BMI/bmi_port.c b/src/BMI/bmi_port.c
	XXX add argument to packet handler
diff --git a/src/Makefile.am b/src/Makefile.am
	XXX add netmap
diff --git a/src/bm_sim/Makefile.am b/src/bm_sim/Makefile.am
	XXX add netmap
diff --git a/src/bm_sim/dev_mgr_bmi.cpp b/src/bm_sim/dev_mgr_bmi.cpp
	XXX UPSTREAM additional argument, we have a better fix
diff --git a/src/bm_sim/dev_mgr_netmap.cpp b/src/bm_sim/dev_mgr_netmap.cpp
	XXX new file, ok
diff --git a/src/bm_sim/dev_mgr_packet_in.cpp b/src/bm_sim/dev_mgr_packet_in.cpp
	XXX additional argument
diff --git a/src/bm_sim/match_units.cpp b/src/bm_sim/match_units.cpp
	OK UPSTREAM, better cast
diff --git a/src/bm_sim/options_parse.cpp b/src/bm_sim/options_parse.cpp
	XXX maybe move into target
diff --git a/src/bm_sim/pcap_file.cpp b/src/bm_sim/pcap_file.cpp
	OK UPSTREAM additional argument
	XXX test infinite packets, check
diff --git a/src/bm_sim/switch.cpp b/src/bm_sim/switch.cpp
	XXX additional argument to function
	XXX use netmap maybe on target
diff --git a/src/netmap/Makefile.am b/src/netmap/Makefile.am
	ok new file
diff --git a/src/netmap/netmap/netmap_manager.h b/src/netmap/netmap/netmap_manager.h
	ok new file
diff --git a/src/netmap/netmap_interface.h b/src/netmap/netmap_interface.h
	ok new file
diff --git a/src/netmap/netmap_manager.cpp b/src/netmap/netmap_manager.cpp
	ok new file
diff --git a/targets/Makefile.am b/targets/Makefile.am
	XXX additional test target
diff --git a/targets/fast_switch/.gitignore b/targets/fast_switch/.gitignore
	XXX additional test target
diff --git a/targets/fast_switch/Makefile.am b/targets/fast_switch/Makefile.am
	XXX additional test target, copied from simple_router
diff --git a/targets/fast_switch/commands.txt b/targets/fast_switch/commands.txt
	XXX additional test target, copied from simple_router
diff --git a/targets/fast_switch/fast_switch.cpp b/targets/fast_switch/fast_switch.cpp
	XXX additional test target, copied and heavily modified
diff --git a/targets/fast_switch/first_in.pcap b/targets/fast_switch/first_in.pcap
	XXX test files, see what to do
diff --git a/targets/fast_switch/first_out.pcap b/targets/fast_switch/first_out.pcap
	XXX test files, see what to do (check if needed needed ?)
diff --git a/targets/fast_switch/primitives.cpp b/targets/fast_switch/primitives.cpp
	XXX additional test target, copied from ...
diff --git a/targets/fast_switch/run.sh b/targets/fast_switch/run.sh
	XXX additional test target, copied from ...
diff --git a/targets/fast_switch/runtime_CLI b/targets/fast_switch/runtime_CLI
	XXX additional test target, copied from ...
diff --git a/targets/fast_switch/second_in.pcap b/targets/fast_switch/second_in.pcap
	XXX test files, see what to do
diff --git a/targets/fast_switch/second_out.pcap b/targets/fast_switch/second_out.pcap
	XXX test files, see what to do (check if needed needed ?)
diff --git a/targets/fast_switch/simple_router.json b/targets/fast_switch/simple_router.json
	XXX additional test target, copied from ...
diff --git a/targets/fast_switch/simple_router.p4 b/targets/fast_switch/simple_router.p4
	XXX additional test target, copied from ...
diff --git a/targets/fast_switch/swap_test.txt b/targets/fast_switch/swap_test.txt
	XXX additional test target, copied from ...
diff --git a/targets/l2_switch/Makefile.am b/targets/l2_switch/Makefile.am
	XXX freebsd needs extra libraries (stdthreads e libnetmap.la)
	XXX see if we can simplify targets makefiles
diff --git a/targets/l2_switch/l2_switch.cpp b/targets/l2_switch/l2_switch.cpp
	XXX extra argument
diff --git a/targets/simple_router/Makefile.am b/targets/simple_router/Makefile.am
	XXX freebsd needs extra libraries (stdthreads e libnetmap.la)
	XXX see if we can simplify targets makefiles
diff --git a/targets/simple_router/simple_router.cpp b/targets/simple_router/simple_router.cpp
	XXX check various test modifications
diff --git a/targets/simple_switch/Makefile.am b/targets/simple_switch/Makefile.am
	XXX freebsd needs extra libraries (stdthreads e libnetmap.la)
	XXX see if we can simplify targets makefiles
diff --git a/targets/simple_switch/primitives.cpp b/targets/simple_switch/primitives.cpp
	OK UPSTREAM missing include random
diff --git a/targets/simple_switch/simple_switch.cpp b/targets/simple_switch/simple_switch.cpp
	XXX extra argument
diff --git a/targets/simple_switch/simple_switch.h b/targets/simple_switch/simple_switch.h
	XXX extra argument
diff --git a/tests/stress_tests/Makefile.am b/tests/stress_tests/Makefile.am
	XXX freebsd needs extra libraries (stdthreads e libnetmap.la)
	XXX see if we can simplify targets makefiles
	XXX there is an additional test
diff --git a/tests/stress_tests/stress_utils.h b/tests/stress_tests/stress_utils.h
	XXX extra argument
diff --git a/tests/stress_tests/test_queue_1.cpp b/tests/stress_tests/test_queue_1.cpp
	XXX test code for our queue
